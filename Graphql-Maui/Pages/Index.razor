@page "/"

@inject IGraphQLService _IGraphQLService;



<h1>MAUI GraphQL Client</h1>

Getting Crypto Prices using GraphQL:
<ul>

    @foreach (var session in _assets)
    {
        <li>@session.Name: @session.Price.LastPrice</li>
    }
</ul>



@code {
    private IReadOnlyList<IAssetInfo> _assets = Array.Empty<IAssetInfo>();
    private IDisposable _storeSession;

    protected override  void OnInitialized()
    {
        Device.InvokeOnMainThreadAsync(async () => {
            _assets = await _IGraphQLService.GetAssets();
            InvokeAsync(this.StateHasChanged);
        });

    }

    public void Dispose()
    {
        _storeSession?.Dispose();
    }

    }

